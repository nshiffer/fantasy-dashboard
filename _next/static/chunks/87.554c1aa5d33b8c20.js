"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{6087:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var s=r(5155),a=r(2115),l=r(2647);let i=e=>{var t,r;let{matchups:i,rosters:n,users:d,players:o,currentWeek:c}=e,[x,m]=(0,a.useState)(null),h=(null==(t=n[0])?void 0:t.roster_positions)||["QB","RB","RB","WR","WR","TE","FLEX","DST"],u=(e,t)=>0===t?0:e/t*100,g=e=>e>=90?"bg-green-500":e>=75?"bg-green-400":e>=50?"bg-yellow-400":e>=25?"bg-orange-400":"bg-red-400",f=x?n.find(e=>e.roster_id===x):n[0],b=f?(e=>{let t={};h.forEach(e=>{t[e]={optimalCount:0,totalWeeks:0}});for(let r=1;r<=c;r++){let s=(i[r]||[]).find(t=>t.roster_id===e);s&&(s.starters||[]).forEach((e,r)=>{let s=r<h.length?h[r]:"FLEX";t[s]&&(t[s].totalWeeks++,t[s].optimalCount++)})}return t})(f.roster_id):{},p=f?(0,l.nT)(f.roster_id,n,d):null,{starters:y,benchPlayers:j}=(0,a.useMemo)(()=>{if(!f||!o)return{starters:[],benchPlayers:[]};let e=null;for(let t=c;t>=1;t--){let r=(i[t]||[]).find(e=>e.roster_id===f.roster_id);if(r){e=r;break}}let t=(null==e?void 0:e.starters)||f.starters||[],r=(f.players||[]).filter(e=>!t.includes(e)),s=["QB","RB","RB","WR","WR","TE","FLEX","DEF","FLEX"],a=t.map(e=>{let t=o[e]||{position:"Unknown"};return{id:e,playerPosition:t.position||"Unknown",name:t?"".concat(t.first_name," ").concat(t.last_name):"Unknown Player",team:(null==t?void 0:t.team)||"FA"}}),l=[],n=new Set,d={QB:0,RB:0,WR:0,TE:0,DEF:0,K:0};a.forEach(e=>{e.playerPosition&&(d[e.playerPosition]=(d[e.playerPosition]||0)+1)});let x=["QB","RB","RB","WR","WR","TE"];return a.forEach((e,t)=>{if("DEF"===e.playerPosition){l[t]="DEF",n.add("".concat(e.playerPosition,"-").concat(t));return}if(x.includes(e.playerPosition)&&!n.has(e.playerPosition)&&t<x.length&&Array.from(n).filter(t=>t.startsWith(e.playerPosition+"-")).length<("RB"===e.playerPosition||"WR"===e.playerPosition?2:1)){l[t]=e.playerPosition,n.add("".concat(e.playerPosition,"-").concat(t));return}l[t]="QB"===e.playerPosition?"SUPERFLEX":"FLEX"}),{starters:a.map((e,t)=>{o[e.id];let r=l[t]||(t<s.length?s[t]:"FLEX"),a="QB"===e.playerPosition&&"FLEX"===r?"SUPERFLEX":r;return{id:e.id,name:e.name,position:e.playerPosition,team:e.team,slot:"QB"===e.playerPosition&&"FLEX"===r?"SUPERFLEX":r,displaySlot:a,originalPosition:e.playerPosition}}),benchPlayers:r.map(e=>{let t=o[e];return{id:e,name:t?"".concat(t.first_name," ").concat(t.last_name):"Unknown Player",position:(null==t?void 0:t.position)||"Unknown",team:(null==t?void 0:t.team)||"FA"}}).sort((e,t)=>{let r={QB:1,RB:2,WR:3,TE:4,K:5,DEF:6};return(r[e.position]||99)-(r[t.position]||99)})}},[f,o,c,i,h]),k=(0,a.useMemo)(()=>{if(!f||!o)return{};let e={},t=new Set;f.players.forEach(e=>{let r=o[e];r&&r.position&&t.add(r.position)});let r=[...new Set([...h.map(e=>e.replace(/[0-9]/g,"").split("_")[0]).filter(e=>!["FLEX","SUPER","REC"].includes(e)),...t])].filter(e=>["QB","RB","WR","TE","K","DEF"].includes(e));r.forEach(t=>{e[t]=0}),f.players.forEach(t=>{let s=o[t];s&&r.includes(s.position)&&e[s.position]++});let s={},a={};h.forEach(e=>{let t=e.replace(/[0-9]/g,"").split("_")[0];r.includes(t)&&(a[t]=(a[t]||0)+1)}),r.forEach(e=>{let t=a[e]||0;s[e]=t+("QB"===e||"TE"===e||"K"===e||"DEF"===e?1:2)});let l={};return Object.keys(e).forEach(t=>{let r=e[t],a=s[t]||0,i=r-a,n="balanced";i<0?n="need":i>1&&(n="surplus"),l[t]={current:r,ideal:a,status:n,diff:i}}),l},[f,o,h]),N=(0,a.useMemo)(()=>{if(!i||!n||!o||!f)return{flex:{},superflex:{}};let e=[],t=[];if(h.forEach((r,s)=>{"FLEX"===r?e.push(s):("SUPER_FLEX"===r||"SUPERFLEX"===r)&&t.push(s)}),0===e.length&&0===t.length)return{flex:{},superflex:{}};let r={},s={},a=0,l=0,d=!1;n.forEach(n=>{let x=null;for(let e=c;e>=1;e--){let t=(i[e]||[]).find(e=>e.roster_id===n.roster_id);if(t&&t.starters&&t.starters.length>0){x=t,d=!0;break}}x&&x.starters&&(e.forEach(e=>{if(e>=x.starters.length)return;let t=o[x.starters[e]];if(!t)return;a++;let s=t.position;r[s]=(r[s]||0)+1}),t.forEach(e=>{if(e>=x.starters.length)return;let t=o[x.starters[e]];if(!t)return;l++;let r=t.position;s[r]=(s[r]||0)+1}))}),d||n.forEach(i=>{i.starters&&0!==i.starters.length&&(e.forEach(e=>{if(e>=i.starters.length)return;let t=o[i.starters[e]];if(!t)return;a++;let s=t.position;r[s]=(r[s]||0)+1}),t.forEach(e=>{if(e>=i.starters.length)return;let t=o[i.starters[e]];if(!t)return;l++;let r=t.position;s[r]=(s[r]||0)+1}))}),0===a&&e.length>0&&y.length>0&&e.forEach(e=>{if(e>=y.length)return;let t=y[e];if(!t||!t.originalPosition)return;a++;let s=t.originalPosition;r[s]=(r[s]||0)+1}),0===l&&t.length>0&&y.length>0&&t.forEach(e=>{if(e>=y.length)return;let t=y[e];if(!t||!t.originalPosition)return;l++;let r=t.originalPosition;s[r]=(s[r]||0)+1});let x={},m={};return a>0&&Object.entries(r).forEach(e=>{let[t,r]=e;x[t]=Math.round(r/a*100)}),l>0&&Object.entries(s).forEach(e=>{let[t,r]=e;m[t]=Math.round(r/l*100)}),{flex:x,superflex:m,hasFlex:a>0,hasSuperflex:l>0}},[i,n,o,c,h,f,y]),v=(0,a.useMemo)(()=>{if(!f||!o||0===y.length)return{};let e={};return y.forEach(t=>{("FLEX"===t.slot||"SUPERFLEX"===t.slot)&&(e[t.slot]=t.originalPosition)}),e},[f,o,y]);return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 shadow overflow-hidden sm:rounded-lg",children:[(0,s.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Roster Analysis"}),(0,s.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400",children:"Analyze roster strengths and weaknesses"})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-700 px-4 py-5 sm:px-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"roster-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Team"}),(0,s.jsxs)("select",{id:"roster-select",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-dark-600 dark:bg-dark-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:x||"",onChange:e=>m(parseInt(e.target.value)||null),children:[(0,s.jsx)("option",{value:"",children:"Select a team..."}),n.map(e=>{var t;let r=(0,l.nT)(e.roster_id,n,d);return(0,s.jsx)("option",{value:e.roster_id,children:(null==r||null==(t=r.metadata)?void 0:t.team_name)||(null==r?void 0:r.display_name)||"Team ".concat(e.roster_id)},e.roster_id)})]})]}),f&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-4 text-dark-900 dark:text-white",children:(null==p||null==(r=p.metadata)?void 0:r.team_name)||(null==p?void 0:p.display_name)||"Team ".concat(f.roster_id)}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-lg border border-gray-200 dark:border-dark-600 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-dark-800 px-4 py-3 border-b border-gray-200 dark:border-dark-600",children:(0,s.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:"Current Roster"})}),(0,s.jsxs)("div",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:[(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h6",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Starters"}),(0,s.jsx)("div",{className:"space-y-2",children:y.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-24 text-xs text-center font-medium rounded py-1 ".concat("FLEX"===e.slot||"SUPERFLEX"===e.slot?"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300":"bg-primary-100 dark:bg-primary-900/40 text-primary-800 dark:text-primary-300"),children:e.displaySlot||e.slot}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.team," - ",e.originalPosition]})]})]}),("FLEX"===e.slot||"SUPERFLEX"===e.slot)&&N.flex&&"object"==typeof N.flex&&e.originalPosition in N.flex&&(0,s.jsxs)("div",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 px-2 py-1 rounded",children:[N.flex[e.originalPosition],"% of teams start ",e.originalPosition," in ","SUPERFLEX"===e.slot?"SUPERFLEX":"FLEX"]})]},t))})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("h6",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Bench (",j.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 dark:bg-dark-800 p-2 rounded",children:[(0,s.jsx)("div",{className:"w-7 h-7 flex items-center justify-center rounded-full bg-gray-200 dark:bg-dark-700 text-xs font-medium text-gray-800 dark:text-gray-300",children:e.position}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.team})]})]},t))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-lg border border-gray-200 dark:border-dark-600 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-dark-800 px-4 py-3 border-b border-gray-200 dark:border-dark-600",children:(0,s.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:"Roster Needs"})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:Object.entries(k).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"rounded-lg p-3 ".concat("need"===r.status?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-900/40":"surplus"===r.status?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-900/40":"bg-gray-50 dark:bg-dark-800 border-gray-200 dark:border-dark-600"," border flex flex-col items-center justify-center"),children:[(0,s.jsx)("div",{className:"text-sm font-semibold mb-1",children:t}),(0,s.jsx)("div",{className:"text-xl font-bold",children:r.current}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"need"===r.status?"Need ".concat(Math.abs(r.diff)," more"):"surplus"===r.status?"".concat(r.diff," extra"):"Balanced"})]},t)})})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-lg border border-gray-200 dark:border-dark-600 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-dark-800 px-4 py-3 border-b border-gray-200 dark:border-dark-600",children:(0,s.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:"League Flex Position Trends"})}),(0,s.jsx)("div",{className:"p-4",children:N.hasFlex||N.hasSuperflex?(0,s.jsxs)("div",{className:"space-y-4",children:[N.hasFlex&&N.flex&&Object.keys(N.flex).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"text-sm font-medium mb-2",children:"FLEX Position Usage"}),(0,s.jsx)("div",{className:"flex items-center mb-1",children:N.flex&&Object.entries(N.flex).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).map(e=>{let[t,r]=e;return(0,s.jsx)("div",{className:"h-8",style:{width:"".concat(r,"%"),backgroundColor:"RB"===t?"#ef4444":"WR"===t?"#3b82f6":"#8b5cf6"},children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-white text-xs font-medium",children:r>10?"".concat(t," ").concat(r,"%"):""})},t)})}),(0,s.jsx)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:N.flex&&Object.entries(N.flex).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-1",style:{backgroundColor:"RB"===t?"#ef4444":"WR"===t?"#3b82f6":"#8b5cf6"}}),t,": ",r,"%"]},t)})})]}),N.hasSuperflex&&N.superflex&&Object.keys(N.superflex).length>0&&(0,s.jsxs)("div",{className:"pt-3 border-t border-gray-200 dark:border-dark-600",children:[(0,s.jsx)("h6",{className:"text-sm font-medium mb-2",children:"SUPERFLEX Position Usage"}),(0,s.jsx)("div",{className:"flex items-center mb-1",children:N.superflex&&Object.entries(N.superflex).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).map(e=>{let[t,r]=e;return(0,s.jsx)("div",{className:"h-8",style:{width:"".concat(r,"%"),backgroundColor:"QB"===t?"#10b981":"RB"===t?"#ef4444":"WR"===t?"#3b82f6":"#8b5cf6"},children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-white text-xs font-medium",children:r>10?"".concat(t," ").concat(r,"%"):""})},t)})}),(0,s.jsx)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:N.superflex&&Object.entries(N.superflex).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-1",style:{backgroundColor:"QB"===t?"#10b981":"RB"===t?"#ef4444":"WR"===t?"#3b82f6":"#8b5cf6"}}),t,": ",r,"%"]},t)})})]}),Object.keys(v).length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md p-3 mt-3",children:[(0,s.jsx)("h6",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Your Flex Usage"}),(0,s.jsx)("ul",{className:"space-y-1 text-sm",children:Object.entries(v).map(e=>{let[t,r]=e;return(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"font-medium",children:["SUPERFLEX"===t?"SUPERFLEX":t,":"]}),(0,s.jsx)("span",{className:"ml-2",children:r}),N.flex&&"object"==typeof N.flex&&r in N.flex&&"FLEX"===t&&(0,s.jsxs)("span",{className:"ml-2 text-xs",children:["(League avg: ",N.flex[r],"% use ",r,")"]}),N.superflex&&"object"==typeof N.superflex&&r in N.superflex&&"SUPERFLEX"===t&&(0,s.jsxs)("span",{className:"ml-2 text-xs",children:["(League avg: ",N.superflex[r],"% use ",r,")"]})]},t)})})]})]}):(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:h.some(e=>e.includes("FLEX"))?"Not enough data yet - will show flex position usage as the season progresses":"This league does not use flex positions"})})]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Roster Utilization Heatmap"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"See how efficiently each team utilizes their roster spots"}),(0,s.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4",children:Object.entries(b).map(e=>{let[t,r]=e,a=u(r.optimalCount,r.totalWeeks),l=g(a);return(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 rounded-lg ".concat(l),children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-white",children:t}),(0,s.jsxs)("span",{className:"text-lg font-bold text-white",children:[a.toFixed(0),"%"]}),(0,s.jsxs)("span",{className:"text-xs text-white",children:[r.optimalCount,"/",r.totalWeeks]})]},t)})}),(0,s.jsx)("div",{className:"mt-6 flex justify-center",children:(0,s.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Low"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-8 h-6 bg-red-400"}),(0,s.jsx)("div",{className:"w-8 h-6 bg-orange-400"}),(0,s.jsx)("div",{className:"w-8 h-6 bg-yellow-400"}),(0,s.jsx)("div",{className:"w-8 h-6 bg-green-400"}),(0,s.jsx)("div",{className:"w-8 h-6 bg-green-500"})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"High"})]})})]})]})]})]})}}}]);